const o=document.getElementById("nav-mobile"),s=document.querySelector(".nav-visuals"),r=document.querySelectorAll('a[href^="#"]');let c=!1;function a(e){e&&(r.forEach(t=>t.classList.remove("active")),e.classList.add("active"))}function u(){s.classList.toggle("open"),o.setAttribute("aria-expanded",`${o.getAttribute("aria-expanded")!=="true"}`)}function l(){s.classList.remove("open"),o.setAttribute("aria-expanded","false")}const d=new IntersectionObserver(e=>{const n=e.find(i=>i.isIntersecting)?.target?.id;n&&!c&&a(document.querySelector(`a[href="#${n}"`))},{threshold:.1,rootMargin:"0px"});o&&(o.onclick=u);document.querySelectorAll("section").forEach(e=>d.observe(e));r.forEach(e=>{e.onclick=function(t){const n=window.matchMedia("(max-width: 550px)").matches;c=!0,n&&(t.preventDefault(),document.querySelector(e.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"start"}),l()),e?.closest(".subnav")||a(t.target),setTimeout(()=>{c=!1},600)}});["click","touchstart"].forEach(e=>{document.addEventListener(e,t=>{t.target!==o&&!s?.contains(t.target)&&l()})});
